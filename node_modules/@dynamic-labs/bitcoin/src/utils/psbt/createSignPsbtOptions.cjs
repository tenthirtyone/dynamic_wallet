'use client'
'use strict';

Object.defineProperty(exports, '__esModule', { value: true });

var validatePsbt = require('./validator/validatePsbt.cjs');
require('bitcoinjs-lib');
require('@dynamic-labs/wallet-connector-core');
require('sats-connect');

const createPsbtOptions = (psbt, request) => {
    var _a;
    const psbtSignOptions = {
        autoFinalized: false,
    };
    if (request.signature) {
        validatePsbt.validatePsbt(psbt, request.allowedSighash, request.signature);
        const toSignInputs = [];
        for (const signature of request.signature) {
            if ((_a = signature.signingIndexes) === null || _a === void 0 ? void 0 : _a.length) {
                for (const index of signature.signingIndexes) {
                    toSignInputs.push({
                        address: signature.address,
                        disableAddressValidation: signature.disableAddressValidation,
                        index,
                        sighashTypes: request.allowedSighash,
                    });
                }
            }
        }
        psbtSignOptions.toSignInputs = toSignInputs;
    }
    return psbtSignOptions;
};

exports.createPsbtOptions = createPsbtOptions;
